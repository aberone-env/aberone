<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
</head>
<body>

<h2>ğŸ“± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>

<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­">
<br><br>
<button onclick="sendCode()">Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯</button>

<br><br>

<input id="code" placeholder="Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚">
<br><br>
<button onclick="verifyCode()">Ø¯Ø®ÙˆÙ„</button>

<script>
async function sendCode() {
  const phone = document.getElementById("phone").value;

  await fetch("/api/whatsapp/send-code", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ phone })
  });

  alert("ğŸ“¨ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨");
}

async function verifyCode() {
  const phone = document.getElementById("phone").value;
  const code = document.getElementById("code").value;

  const res = await fetch("/api/whatsapp/verify-code", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ phone, code })
  });

  if (res.ok) {
    window.location.href = "/";
  } else {
    alert("âŒ ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­");
  }
}
</script>

</body>
</html>